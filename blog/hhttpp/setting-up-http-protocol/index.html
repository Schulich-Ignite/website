<!doctype html><html style=overflow-x:hidden><head><meta charset=utf-8><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","author":"Schulich Ignite","name":"HHTTPPP; Setting up the HTTP protocol","dateCreated":"2023-99-06","text":"HTTP is the protocol that runs the web, it\u0026rsquo;s the way most devices talk to each other these days. It\u0026rsquo;s also the protocol we are going to use, and as such we need to get everything setup for the http protocol.","image":"\/img\/blog\/hhttpp\/hero.jpg"}</script><title>HHTTPPP; Setting up the HTTP protocol | Schulich Ignite</title><link rel="shortcut icon" href=https://schulichignite.com/img/favicon.ico type=image/x-icon><link rel=icon href=https://schulichignite.com/img/favicon.ico type=image/x-icon><meta property="og:title" content=" HHTTPPP; Setting up the HTTP protocol | Schulich Ignite Blog "><meta property="og:type" content="website"><meta property="og:url" content=" https://schulichignite.com/blog/hhttpp/setting-up-http-protocol/ "><meta property="og:image" content="/img/blog/hhttpp/hero.jpg "><meta name=Description content=" HHTTPPP; Setting up the HTTP protocol; HTTP is the protocol that runs the web, it&rsquo;s the way most devices talk to each other these days. It&rsquo;s also the protocol we are going to use, and as such we need to get everything setup for the http protocol. "><meta property="og:description" content=" HHTTPPP; Setting up the HTTP protocol; HTTP is the protocol that runs the web, it&rsquo;s the way most devices talk to each other these days. It&rsquo;s also the protocol we are going to use, and as such we need to get everything setup for the http protocol. "><link href="https://fonts.googleapis.com/css2?family=Raleway:wght@900&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Encode+Sans+Semi+Condensed:wght@900&display=swap" rel=stylesheet><link href=https://unpkg.com/video.js@7/dist/video-js.min.css rel=stylesheet><link href=https://unpkg.com/@videojs/themes@1/dist/sea/index.css rel=stylesheet><link rel=stylesheet href=https://schulichignite.com/css/index.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/vs2015.min.css integrity="sha512-mtXspRdOWHCYp+f4c7CkWGYPPRAhq9X+xCvJMUBVAb6pqA4U8pxhT3RWT3LP3bKbiolYL2CkL1bSKZZO4eeTew==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css></head><nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark"><a class=navbar-brand href=../../../><img src=https://schulichignite.com/img/logos/ignite.svg width=40 height=60 alt="Schulich ignite logo">
<span class=brand-name>Schulich Ignite</span></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Sessions</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=../../../beginner>Ignite Beginner</a>
<a class=dropdown-item href=../../../flare>Ignite Flare</a>
<a class=dropdown-item href=../../../scorch>Ignite Scorch</a></div></li></li><li class=nav-item><a class=nav-link href=https://forms.gle/ZJoDAbcTf1M3NBxYA target=_blank rel="noopener noreferrer">Mailing list</a></li><li class=nav-item><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Media</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=../../../blog>Blog</a>
<a class=dropdown-item href=../../../language>Languages</a>
<a class=dropdown-item href=../../../definitions>Definitions</a></div></li></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=../../../mission>Our Mission</a>
<a class=dropdown-item href=../../../team>Our Team</a></li><li class=nav-item><a class=nav-link href=../../../contact>Contact</a></li></ul></div></nav><body><div class=diagonal-header><div class=mainheader>Blog</div><div class="subheader dates d-none d-sm-block"><span class=long-dates>Monday, Sep 4, 2023</span>
<span class=short-dates>09/04/23</span></div></div><section class=section><img class="card-img-top large-image blog-hero-image" src=../../../img/blog/hhttpp/hero.jpg><div class=container><div class=row><div class="card no-background"><div class=card-body><h1 class=card-title>HHTTPPP; Setting up the HTTP protocol</h1><h3 style=font-size:1em;color:#787878>Creating our classes & data model</h3><a class="btn btn-secondary my-2" href=../../../blog>&larr; Go back to blog</a><div id=article-info class=card><div class=row><div class=col-md-6><div class=card-body><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#terms--concepts>Terms & Concepts</a><ul><li><a href=#anatomy-of-a-url>Anatomy of a URL</a></li></ul></li><li><a href=#how-http-works>How HTTP Works</a><ul><li><a href=#request----response>Request &lt;&ndash;> response</a></li></ul></li><li><a href=#lets-look-at-existing-sites>Let&rsquo;s look at existing sites</a><ul><li><a href=#browser-dev-tools>Browser dev-tools</a></li><li><a href=#httpie>httpie</a></li><li><a href=#curl>Curl</a></li></ul></li><li><a href=#how-were-going-to-implement-all-this>How we&rsquo;re going to implement all this</a><ul><li><a href=#testing>Testing</a></li><li><a href=#hhttpp-structure>HHTTPP Structure</a></li><li><a href=#additional-features>Additional features</a></li></ul></li><li><a href=#more-resources>More resources</a></li></ul></nav></p></div></div><div class=col-md-6><div class=card-body><p class=card-text><i class="bi bi-calendar2-week-fill"></i> <time>Monday, Sep 4, 2023</time></p><p class=card-text><i class="bi bi-stopwatch-fill"></i><em>~11 Minute Read</em><br><em><i class="bi bi-tags-fill"></i></em>
<a href=https://schulichignite.com/tags/python/>python</a>,
<a href=https://schulichignite.com/tags/scorch/>scorch</a>,
<a href=https://schulichignite.com/tags/web/>web</a>,
<a href=https://schulichignite.com/tags/theory/>theory</a></p><h4>Author(s) information</h4><div id=author-information><a href=https://schulichignite.com/authors/kieran-wood/ target=_blank rel="noopener noreferrer"><img width=100rem src=../../../img/blog/avatars/kieran.jpg alt></a><h6 class=card-title><a href=https://schulichignite.com/authors/kieran-wood/ target=_blank rel="noopener noreferrer"><br>Kieran Wood</a></h6><div id=author-icons><a href=mailto:kieran@canadiancoding.ca><i class="bi bi-envelope-fill"></i></a>
<a href=https://github.com/descent098 target=_blank><i class="bi bi-github"></i></a>
<a href=https://linkedin.com/in/kieran-wood target=_blank><i class="bi bi-linkedin"></i></a>
<a href=https://kieranwood.ca target=_blank><i class="bi bi-globe"></i></a></div><div class=text-primary style=max-width:40ch><p>I&rsquo;m a computer science major, with a minor in philosophy. I love to do open source work, especially in scripting, automation, web development, API&rsquo;s, CLI&rsquo;s and dev ops!</p></div></div></div></div></div></div></div><hr><div id=article-content class="card-text blog-text"><p>HTTP is the protocol that runs the web, it&rsquo;s the way most devices talk to each other these days. It&rsquo;s also the protocol we are going to use, and as such we need to get everything setup for the http protocol. For this series we are taking an object-oriented aproach, so we will want to create the <code>Server</code>, <code>Request</code> and <code>Response</code> objects to house our info. This will help us model out the HTTP protocol, so we can do everything else we need to later.</p><h2 id=terms--concepts>Terms & Concepts</h2><p><strong>These two next sections are a repeat of the <a href=../series-introduction/#terms--concepts>terms section in the series introduction</a>, you can skip them by clicking <a href=#how-http-works>here</a></strong></p><p>To start there are some terms we need to understand. Here are some of the basics:</p><table><thead><tr><th>Term</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>IP Address</td><td>This is what computers use to communicate with one another, it is similar to an actual address</td><td><code>127.0.0.1</code> is the IP address reserved for the computer you&rsquo;re currently on, so if you need to communicate with yourself you can (this is useful for testing)</td></tr><tr><td>Port</td><td>A computer can have multiple servers running on it. Each of these &ldquo;servers&rdquo; runs on a different port so you can communicate with them sparately</td><td>If you are running a server on your own machine and have it on port 8080 you can access it in a browser at <code>http://localhost:8080</code></td></tr><tr><td>Proxy/alias</td><td>In our context we&rsquo;re using this to mean something that stands-in or is replaced by something else</td><td>For <code>localhost</code> is a proxy for <code>127.0.0.1</code> on your computer, so if you go to <code>localhost</code> it is the same as going to <code>127.0.0.1</code></td></tr><tr><td>Host</td><td>The name of a computer (local/on the machine)</td><td>Let&rsquo;s say you gave your PC the name <code>thoth</code> when you set it up, then on your own network you can access it at <code>thoth</code> or <code>thoth.local</code> (an alias for an IP)</td></tr></tbody></table><h3 id=anatomy-of-a-url>Anatomy of a URL</h3><p>Some of the most important terms we need to understand are what makes up a URL. A URL is what we type into a browser bar to get to a site (i.e. <a href=https://schulichignite.com>https://schulichignite.com</a>). Here is a diagram breaking apart the different peices:</p><p><img src=../../../img/blog/hhttpp/Post%201/url-anatomy.png alt></p><p>For those of you that can&rsquo;t read the image, this is the basic anatomy of a URL:</p><pre tabindex=0><code>&lt;protocol&gt;://&lt;domain/hostname/ip&gt;:&lt;port(optional)&gt;&lt;slug/URI&gt;
</code></pre><p>For example here are some URL&rsquo;s:</p><pre tabindex=0><code>http://127.0.0.1:80/
http://localhost:8000/
http://thoth:32400/web/index
http://schulichignite.com/contact
http://example-site.co.uk/about-us
</code></pre><table><thead><tr><th>Term</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>Protocol</td><td>The protocol is the rules and procedures that the browser should follow to communicate with the underlying server</td><td><code>http://</code>, <code>https://</code>, <code>file://</code></td></tr><tr><td>Domain</td><td>The name of a computer (remote/on a server accessible to the internet)</td><td>When you go to <code>google.ca</code> that is a domain, the domain itself is an alias for the IP address of a server that returns the webpage you&rsquo;re looking for domains have 2 parts, the domain name, and the TLD</td></tr><tr><td>Domain Name</td><td>The domain name is the main portion of the domain, before the <code>.</code></td><td>google, netflix, schulichignite</td></tr><tr><td>TLD (top-level domain)</td><td>These groupings of domains used to serve more of a roll before, but now are mostly all the same. They are the letters that come after a <code>.</code> in a URL, and indicate usually which country the service is from</td><td><code>.ca</code>,<code>.com</code>,<code>.co.uk</code>,<code>.sh</code></td></tr><tr><td>Slug/URI</td><td>The part that comes after a domain to indicate which specific resource you want from the specified server on the specified port</td><td><code>/</code>, <code>/about</code>,<code>/blog/title</code></td></tr></tbody></table><h2 id=how-http-works>How HTTP Works</h2><p>Let&rsquo;s look at the theory of how HTTP works, and the steps made in the protocol.</p><h3 id=request----response>Request &lt;&ndash;> response</h3><p>HTTP is a request to response protocol. This means the client will create a request that is sent to the host server which is then processed and a response is sent. You can think of this like mailing a letter to where you add in the contact details, send a letter and recieve a response:</p><p><img src=../../../img/blog/hhttpp/Post%201/http-request-response.png alt></p><p>Requests must have:</p><ul><li>A method</li><li>A hostname</li><li>A slug</li><li>Content (optional)</li></ul><p>Responses must have:</p><ul><li>A status code</li><li>Content (optional)</li></ul><h4 id=anatomy-of-a-requestresponse>Anatomy of a request/response</h4><p>All requests/responses follow the same format, they are plaintext and include a starting line (contain different info for requests/reponses), headers, and then an empty line and the content:</p><pre tabindex=0><code>STARTING LINE HERE
HEADERS

CONTENT
</code></pre><p>The starting line for requests contains the Method, HTTP version and a slug. The starting line for a response includes the status code.</p><h4 id=headers>Headers</h4><p>Headers are key-value pairs of data that can be passed on both requests and responses.</p><p>These can:</p><ul><li>Change the way data is processed</li><li>Include additional data relevant to be processed</li><li>Include additional data about the client/host to help with debugging and identification/authentication</li></ul><p>So for example let&rsquo;s say you&rsquo;re sending a response and</p><h5 id=mime-types>MIME Types</h5><p>A MIME type acts similarly to the way that extensions work on files. MIME types tell let the client/host know what type of content is being included in the request/response.</p><p>For example let&rsquo;s say you&rsquo;re sending a <code>.css</code> file across the network. You would include the header <code>text/css</code> to tell the browser to interpret the file as a CSS file that should be processed by the browser, if you changed the MIME type to <code>text/plain</code> then the browser will just show you the plain text of the CSS file. Essentially the extension is irrelevent <strong>most of the time</strong>, and the MIME type will take precidence over the extension. If no MIME type is provided some browsers will interpret everything as text, others will interpret them as a file to download, and others will try to just process certain files based on extension.</p><h4 id=request>Request</h4><p>Requests are used for a client to send a message to a host, typically this is the initialization of the HTTP communication, though some features of HTTP will require a HTTP Host to send requests to other servers to complete.</p><p>As mentioned earlier the starting line of an HTTP request includes the method and HTTP version. So for example these are all valid HTTP requests:</p><p>Basic GET</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a6e22e>GET</span> / <span style=color:#66d9ef>HTTP</span><span style=color:#f92672>/</span><span style=color:#ae81ff>1.1</span>
</span></span><span style=display:flex><span>HOST<span style=color:#f92672>:</span> <span style=color:#ae81ff>google.ca</span>
</span></span></code></pre></div><p>With more headers and still no content</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a6e22e>GET</span> /about <span style=color:#66d9ef>HTTP</span><span style=color:#f92672>/</span><span style=color:#ae81ff>1.1</span>
</span></span><span style=display:flex><span>Host<span style=color:#f92672>:</span> <span style=color:#ae81ff>kieranwood.ca</span>
</span></span><span style=display:flex><span>Accept<span style=color:#f92672>:</span><span style=color:#ae81ff>text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span>
</span></span><span style=display:flex><span>Accept-Encoding<span style=color:#f92672>:</span><span style=color:#ae81ff>gzip, deflate, br</span>
</span></span><span style=display:flex><span>Accept-Language<span style=color:#f92672>:</span><span style=color:#ae81ff>en-US,en;q=0.9</span>
</span></span><span style=display:flex><span>Cache-Control<span style=color:#f92672>:</span><span style=color:#ae81ff>max-age=0</span>
</span></span><span style=display:flex><span>Sec-Ch-Ua-Platform<span style=color:#f92672>:</span><span style=color:#ae81ff>&#34;Windows&#34;</span>
</span></span><span style=display:flex><span>User-Agent<span style=color:#f92672>:</span> <span style=color:#ae81ff>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.58</span>
</span></span></code></pre></div><p>With content and a POST request</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a6e22e>POST</span> /contact <span style=color:#66d9ef>HTTP</span><span style=color:#f92672>/</span><span style=color:#ae81ff>1.1</span>
</span></span><span style=display:flex><span>Host<span style=color:#f92672>:</span> <span style=color:#ae81ff>schulichignite.com</span>
</span></span><span style=display:flex><span>Content-Type<span style=color:#f92672>:</span> <span style=color:#ae81ff>application/x-www-form-urlencoded</span>
</span></span><span style=display:flex><span>Content-Length<span style=color:#f92672>:</span> <span style=color:#ae81ff>27</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>email=kieran@example.com&amp;name=Kieran
</span></span></code></pre></div><h5 id=methods>Methods</h5><p>I talked about methods in the last section. There are several Methods with HTTP requests, these methods tell the server what you&rsquo;re intending to do with your request:</p><table><thead><tr><th>Method</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>GET</td><td>Used to get a resource</td><td>You request google.com to GET the webpage associated with that URL</td></tr><tr><td>POST</td><td>Used to send information to a server for creation</td><td>You POST the results of a form you filled out to a submission URL</td></tr><tr><td>PUT</td><td>Used to update existing information on a server (often POST is used in place of PUT for creation and updating)</td><td>You PUT an updated record of your favourite movies on a site that had an old list already on it</td></tr><tr><td>DELETE</td><td>You&rsquo;re requesting the resource at the URL is deleted</td><td>You request to DELETE an image off your instagram account</td></tr></tbody></table><h4 id=responses>Responses</h4><p>Responses are typically generated by the host as a response to a request, though sometimes the host will request some additional information from the client which will then send a response. HTTP responses are some of the hardest to parse because oficially the only thing they have to have is a status code, they don&rsquo;t need headers or content to be considered &ldquo;valid&rdquo;.</p><p>As mentioned earlier the starting line of an HTTP request includes the status code. So for example these are all valid HTTP responses:</p><p>Response with no content or headers</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>200 OK
</span></span></span></code></pre></div><p>Response with no content, headers or status description</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>200
</span></span></span></code></pre></div><p>Response with a status code and headers</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>200 OK
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Host: schulichignite.com
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Server: HHTTPP
</span></span></span></code></pre></div><p>Response with a status code, content and headers</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>200 OK
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Host: schulichignite.com
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Server: HHTTPP
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Content-Type: text/html
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;!DOCTYPE html&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;html lang=&#34;en&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;head&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    &lt;meta charset=&#34;UTF-8&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    &lt;meta http-equiv=&#34;X-UA-Compatible&#34; content=&#34;IE=edge&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    &lt;title&gt;Example Site&lt;/title&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;/head&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;body&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    &lt;h1&gt;Hello World!&lt;/h1&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;/body&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;/html&gt;
</span></span></span></code></pre></div><h4 id=status-codes>Status codes</h4><p>Status codes are used to include information about how the processing of a request went. These are broken up into groups by the 100 up to 599. Each group&rsquo;s starting number indicates what &ldquo;type&rdquo; of code it is. Additionally all official codes have a &ldquo;description&rdquo;, this is optional to be returned:</p><table><thead><tr><th>Range</th><th>Description of group</th><th>Example</th></tr></thead><tbody><tr><td>100-199</td><td><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#information_responses>Informational responses</a>; Gives you some early information before a response is fully ready</td><td><code>102 Processing</code></td></tr><tr><td>200-299</td><td><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#successful_responses>Successful responses</a>; The request had a successful result</td><td><code>200 OK</code></td></tr><tr><td>300-399</td><td><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#redirection_messages>Redirection Messages</a>; The content you want is somewhere else, this response will tell you where to look</td><td><code>301 Moved Permanently</code></td></tr><tr><td>400-499</td><td><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#client_error_responses>Client Error Message</a>; Something went wrong on the client end</td><td><code>403 Forbidden</code></td></tr><tr><td>500-599</td><td><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#server_error_responses>Server Error Responses</a>; Something went wrong on the hosts end</td><td><code>503 Service Unavailable</code></td></tr></tbody></table><p>People do <a href=https://http.dev/418>create their own custom status codes</a> (<a href=https://http.dev/420>ahem</a>), and also change the status descriptions often. It is not recommended to do this, if your custom code gets used for something down the road then your service will be broken!</p><h2 id=lets-look-at-existing-sites>Let&rsquo;s look at existing sites</h2><p>We can see how this works on real websites. Requests and responses are sent publicly so they can be inspected, and you can even manually construct requests.</p><h3 id=browser-dev-tools>Browser dev-tools</h3><p>The easiest way to do this is right in your browser. If you are using a chromium based browser (Chrome, opera, edge etc. and also firefox has this functionality) you can use the developer tools to see the headers.</p><p>For me I need to open the developer tools and then head to the network tab.</p><p><img src=../../../img/blog/hhttpp/Post%201/ignite-network-tab.png alt></p><p>Now that I have it open I can go to <a href=https://schulichignite.com>https://schulichignite.com</a> and will see the network requests come in. There are a bunch of requests and responses. The one we care about for now is one that has the type of <code>document</code> (this is the initial request response):</p><p><img src=../../../img/blog/hhttpp/Post%201/initial-request.png alt></p><p>We can now inspect this request directly by double clicking on it:</p><p><img src=../../../img/blog/hhttpp/Post%201/inspecting-headers.gif alt></p><h3 id=httpie>httpie</h3><p><a href=https://httpie.io/>httpie</a> is a <a href=https://httpie.io/desktop>GUI</a> and <a href=https://httpie.io/cli>CLI</a> that will let you construct requests and see responses. Here is a diagram of how to use it:</p><ol><li>Select method and URL</li><li>Modify headers and Body</li><li>Send the request</li><li>See the raw form of your request</li><li>See your response</li></ol><p><img src=../../../img/blog/hhttpp/Post%201/httpie-diagram.png alt></p><p>There is also a CLI version of httpie, but a much more robust CLI alternative is <code>Curl</code></p><h3 id=curl>Curl</h3><p><a href=https://curl.se/>Curl</a> is a common command line tool included in most linux distributions. This tool will allow you to do <strong>waaay</strong> more than just create requests and see responses, and it&rsquo;s worth looking into yourself. But for the absolute basics if you want to send a simple GET request you can do it with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl https://schulichignite.com
</span></span></code></pre></div><p>You can then add headers by adding a <code>-H</code> flag with the text:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl https://schulichignite.com -H <span style=color:#e6db74>&#34;Host: schulichignite.com&#34;</span>
</span></span></code></pre></div><p>You can then change the method using <code>-X</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -X DELETE https://schulichignite.com/image/my-image.png
</span></span></code></pre></div><h2 id=how-were-going-to-implement-all-this>How we&rsquo;re going to implement all this</h2><p>As mentioned earlier our process will be to create 3 classes whichwill represent all of our required HTTP interaction, these will be added to in later posts to add additional functionality. Here are the required features for the 3 classes:</p><p><code>Server</code>s must be able to:</p><ul><li>Parse a request into a <code>Request</code> object</li><li>Process <code>Request</code> objects and generate <code>Response</code>(s)</li><li>Parse <code>Response</code> objects into plaintext/binary responses</li><li>Parse <code>Request</code>s to genera into plaintext/binary requests to send to other servers (we won&rsquo;t use this, but it&rsquo;s handy)</li></ul><p><code>Request</code>s must have:</p><ul><li>A method (<code>GET</code>, <code>PUT</code>, <code>POST</code>, <code>DELETE</code>)</li><li>A hostname</li><li>A slug</li><li>Additional Headers (optional)</li><li>Content (optional)</li></ul><p><code>Response</code>s must have:</p><ul><li>A status code</li><li>Headers (optional)</li><li>Content (optional)</li></ul><p>On top of these there are a few &ldquo;helper&rdquo; objects that will be stored inside these objects:</p><p><code>StatusCode</code></p><ul><li>Used to store status codes and their corresponding descriptions with some data validation</li></ul><p><code>MIMEType</code></p><ul><li>A class used to store the MIME type and path to the resource</li><li>Has a function that takes the path to a resource and generates a valid MIMEType for that file</li></ul><h3 id=testing>Testing</h3><p>Now that we&rsquo;ve know the features we need to go through and write tests so we know they work properly and then write the features to make the tests work. We&rsquo;re going to do this using <a href=https://docs.pytest.org>pytest</a>. This is a testing framework that will help us check if our code is working correctly. Specifically we are going to write tests for how we <strong>want</strong> the system to work, and then edit the code until the tests pass.</p><p>This is called test driven development (TDD), and it&rsquo;s a common practice in software development. This doesn&rsquo;t work well for every type of application, but it&rsquo;s handy for protocols where there are clear rules that the system should abide by. Since we know what should happen we know what tests to write, usually the biggest problem of TDD is we don&rsquo;t know <strong>exactly</strong> what functionality we need, which makes writing tests hard. Since we know the protocol well enough we know what it should do and so the tests can accurately tells us if we make a mistake in our code.</p><p>The tests can all be found inside the <code>/tests</code> folder for each post.</p><p>To get started run:</p><ol><li><code>pip install -e .</code>; Should be run in the main directory (where <code>setup.py</code> is). This installs <code>hhttpp</code> as an editable package, meaning changes to the folder are automatically updated without needing to be reinstalled</li><li><code>pytest</code>; Once you have the project installed you can run the command in the main directory (where <code>setup.py</code> is) to run the tests</li></ol><p>From there within the source code our structure is basically to have 1 long test function per class, which tests that classes functionality.</p><h4 id=our-tdd-approach>Our TDD Approach</h4><p>We are going to create these objects by first defining some tests that say how we want users to use our code when it&rsquo;s done. For example we can write some tests to make sure we can create status codes, that it works at all edge cases, and that is errors if we go out of the range of allowed status codes (100-599):</p><p><code>/tests/classes_test.py</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pytest <span style=color:#f92672>import</span> raises
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> hhttpp.classes <span style=color:#f92672>import</span> <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_status_codes</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Correct cases</span>
</span></span><span style=display:flex><span>    StatusCode(<span style=color:#ae81ff>101</span>,<span style=color:#e6db74>&#34;Switching Protocols&#34;</span>)
</span></span><span style=display:flex><span>    StatusCode(<span style=color:#ae81ff>200</span>, <span style=color:#e6db74>&#34;Ok&#34;</span>)
</span></span><span style=display:flex><span>    StatusCode(<span style=color:#ae81ff>301</span>, <span style=color:#e6db74>&#34;Moved Permenantly&#34;</span>)
</span></span><span style=display:flex><span>    StatusCode(<span style=color:#ae81ff>404</span>, <span style=color:#e6db74>&#34;Not Found&#34;</span>)
</span></span><span style=display:flex><span>    StatusCode(<span style=color:#ae81ff>500</span>, <span style=color:#e6db74>&#34;Internal Server Error&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Edge cases</span>
</span></span><span style=display:flex><span>    StatusCode(<span style=color:#ae81ff>100</span>, <span style=color:#e6db74>&#34;Continue&#34;</span>)
</span></span><span style=display:flex><span>    StatusCode(<span style=color:#ae81ff>599</span>, <span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Error case</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> raises(<span style=color:#a6e22e>ValueError</span>):
</span></span><span style=display:flex><span>        StatusCode(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#34;Broken&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> raises(<span style=color:#a6e22e>ValueError</span>):
</span></span><span style=display:flex><span>        StatusCode(<span style=color:#ae81ff>99</span>, <span style=color:#e6db74>&#34;Switcheroonied&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> raises(<span style=color:#a6e22e>ValueError</span>):
</span></span><span style=display:flex><span>        StatusCode(<span style=color:#ae81ff>600</span>, <span style=color:#e6db74>&#34;Uknown Browser&#34;</span>)
</span></span></code></pre></div><p>So we can create these sorts of tests for each of these classes. So for example if we wanted to have a method on the <code>Server</code> object called <code>Server.parse_request(request:str)->Request</code>, we can pre-create a test and put it in the file that will fail until we create the correct method:</p><p><code>/hhttpp/classes.py</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a6e22e>@dataclass</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Server</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span> <span style=color:#75715e># More attributes and methods here removed for simplicity</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>parse_request</span>(request:str)<span style=color:#f92672>-&gt;</span>Request:
</span></span><span style=display:flex><span>        <span style=color:#f92672>...</span>
</span></span></code></pre></div><p><code>/tests/classes_test.py</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pytest <span style=color:#f92672>import</span> raises
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> hhttpp.classes <span style=color:#f92672>import</span> <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_server</span>():
</span></span><span style=display:flex><span>    s <span style=color:#f92672>=</span> Server()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    raw_request <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;GET / HTTP/2</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>Host: schulichignite.com&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    req <span style=color:#f92672>=</span> s<span style=color:#f92672>.</span>parse_request(raw_request)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> type(req) <span style=color:#f92672>==</span> Request <span style=color:#75715e># Will fail until a request object is returned</span>
</span></span></code></pre></div><p>From here then when we eventually fill out the function (in this case we&rsquo;re going to hardcode a result and we&rsquo;ll do the parsing in the next post):</p><p><code>/hhttpp/classes.py</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a6e22e>@dataclass</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Server</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span> <span style=color:#75715e># More attributes and methods here removed for simplicity</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>parse_request</span>(request:str) <span style=color:#f92672>-&gt;</span> Request:
</span></span><span style=display:flex><span>        <span style=color:#75715e># TODO: Parse input text to generate Request object</span>
</span></span><span style=display:flex><span>        result <span style=color:#f92672>=</span> Request(<span style=color:#e6db74>&#34;schulichignite.com&#34;</span>, <span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#e6db74>&#34;GET&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> len(self<span style=color:#f92672>.</span>logs) <span style=color:#f92672>&gt;=</span> self<span style=color:#f92672>.</span>log_limit:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>&#34;500 or more, popping value&#34;</span>)
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>logs<span style=color:#f92672>.</span>pop()
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>logs<span style=color:#f92672>.</span>append(result)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> result
</span></span></code></pre></div><p>This approach of creating tests that expect the correct result, and then making our project around these tests is how I will build out the rest of this system.</p><h3 id=hhttpp-structure>HHTTPP Structure</h3><p>Essentially code wise we will have a single <code>Server</code> object. This server object will process incoming requests into <code>Request</code> objects, parse them, then generate a <code>Response</code> object and send back the correctly formatted response:</p><p><img src=../../../img/blog/hhttpp/Post%201/hhttpp-model.png alt></p><h3 id=additional-features>Additional features</h3><p>Some of the objects have additional features beyond the <strong>required HTTP features</strong></p><p>Server</p><ul><li>Error on 4xx/5xx optional</li><li>Logs (storing requests and responses sent/recieved)</li><li>Ability to specify which directory to proxy</li></ul><p>Response</p><ul><li>is_binary flag for responses that contain binary content (i.e. images, pdf&rsquo;s, exe&rsquo;s etc.)</li><li>A server header that defaults to <code>HHTTPP</code></li><li><code>is_error</code> flag for responses that are errors (4xx/5xx)</li></ul><h2 id=more-resources>More resources</h2><ul><li><a href=https://http.dev/>HTTP.dev</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers>MDN HTTP Headers</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc4229>RFC-4229 Official Header Fields HTTP</a></li><li><a href=https://httpie.io/>HTTPie (header visualizer)</a></li><li><a href=https://tools.keycdn.com/curl>CURL online headers</a></li></ul></div><div class="card text-center"><div class=share-icons><h2>Share the article</h2><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fschulichignite.com%2fblog%2fhhttpp%2fsetting-up-http-protocol%2f" target=_blank><i class="bi bi-facebook"></i></a>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fschulichignite.com%2fblog%2fhhttpp%2fsetting-up-http-protocol%2f" target=_blank><i class="bi bi-linkedin"></i></a>
<a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20post%20from%20schulich%20ignite%3A%0Ahttps%3a%2f%2fschulichignite.com%2fblog%2fhhttpp%2fsetting-up-http-protocol%2f" target=_blank><i class="bi bi-twitter"></i></a></div><a href=../../../blog/index.xml target=_blank class=p-3>or subscribe to the blog with RSS <i class="bi bi-rss-fill"></i></a></div></div></div></div></div></section></body><footer class="footer sticky-bottom" style=position:fixed;background-color:#ffcdae><div class=container><div class=row><a href=https://www.instagram.com/schulichignite target=_blank rel="noopener noreferrer"><i class="bi bi-instagram is-large"></i></a>
<a href=https://www.youtube.com/channel/UC7tNvdbu952HOUl_4nK7iww target=_blank rel="noopener noreferrer"><i class="bi bi-youtube is-large"></i></a>
<a href=https://vm.tiktok.com/ZSHPbWU3/ target=_blank rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentcolor" class="bi bi-tiktok is-large mt-3" viewBox="0 0 16 16"><path d="M9 0h1.98c.144.715.54 1.617 1.235 2.512C12.895 3.389 13.797 4 15 4v2c-1.753.0-3.07-.814-4-1.829V11A5 5 0 116 6v2a3 3 0 103 3V0z"/></svg></a><a href=https://www.facebook.com/SchulichIgnite/ target=_blank rel="noopener noreferrer"><i class="bi bi-facebook is-large"></i></a>
<a href=https://linkedin.com/company/schulich-ignite/ target=_blank rel="noopener noreferrer"><i class="bi bi-linkedin is-large"></i></a>
<a href=https://discord.gg/F3Qjqqj target=_blank rel="noopener noreferrer"><i class="bi bi-discord is-large"></i></a></div></div></footer><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js integrity=sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js integrity=sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js integrity="sha512-bgHRAiTjGrzHzLyKOnpFvaEpGzJet3z4tZnXGjpsCcqOnAH6VGUx9frc5bcIhKTVLEiCO6vEhNAgx5jtLUYrfA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/django.min.js integrity="sha512-1NHUMVlHsFnOe0Q36JMbBrNrjVcMdue2occC2xHWYXo7epa3YR54ZibI1G4I+tnJKBGNib11d8JzOElMfUSpYg==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/http.min.js integrity="sha512-4Rcwpn+xUuCDufCycA9UtpmboCxNHysWy23e45PJBQeh7m6Kno5/oQ4T5SmbmSAAZiDsm/IsX1IJwsOjy6ob0g==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/http.min.js integrity="sha512-4Rcwpn+xUuCDufCycA9UtpmboCxNHysWy23e45PJBQeh7m6Kno5/oQ4T5SmbmSAAZiDsm/IsX1IJwsOjy6ob0g==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>hljs.addPlugin(new CopyButtonPlugin),hljs.highlightAll(),hljs.initLineNumbersOnLoad()</script><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@9/dist/mermaid.esm.min.mjs';
    
    let mermaidConfig = {
    startOnLoad: true,
    "theme": "base",
        "themeVariables": {
            "primaryColor": "#ffde59",
            "primaryTextColor": "#d14b3b",
            "primaryBorderColor": "#7C0000",
            "lineColor": "#F8B229",
            "secondaryColor": "#fff",
            "tertiaryColor": "#d14b3b"
        }
    }
    mermaid.initialize(mermaidConfig, '.language-mermaid');
</script><script>window.onload=()=>{words={},articleContent=document.getElementById("article-content").innerHTML,contentSections=articleContent.match(/<p>(.*?)<\/p>|<ul>(.*?)<\/ul>|<ol>(.*?)<\/ol>/g),contentSections.forEach(e=>{for(word in words)searchMask=` ${word} |^${word} |${word}$| ${word}$|${word},`,regEx=new RegExp(searchMask,"igm"),newval=`${e}`.replace(regEx,` <a href="${words[word][0]}" target="_blank" data-toggle="tooltip" data-placement="top" title="${words[word][1]}">${word}</a> `),document.getElementById("article-content").innerHTML=document.getElementById("article-content").innerHTML.replace(e,newval)}),$(function(){$('[data-toggle="tooltip"]').tooltip()})}</script></html>